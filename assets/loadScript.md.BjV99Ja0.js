import{i as m}from"./chunks/env.BUzbqU-4.js";import{_}from"./chunks/types.C-9dMxxX.js";import{d as S,p as k,c as p,o as u,j as n,e as y,ae as f,G as g}from"./chunks/framework.Xbv-JOCv.js";import{_ as h}from"./chunks/stringify.9Pemjmk0.js";async function b(o,a){if(!m())return await new Promise((e,i)=>{const r=_(document.createElement("script"),{src:o,async:!0,...a,onload:e,onerror:(c,l,d,s,t)=>{i(t||new Error(`loadScript failed: ${o}`))}});document.head.append(r)})}async function C(o,a){if(!m())return await new Promise((e,i)=>{const r=_(document.createElement("link"),{href:o,rel:"stylesheet",...a,onload:e,onerror:(c,l,d,s,t)=>{i(t||new Error(`loadCSS failed: ${o}`))}});document.head.append(r)})}const v={class:"app-content"},w={key:0},E=S({__name:"LoadScriptDemo",setup(o){const a=k(!1);async function e(){await l("https://unpkg.com/jquery@3.6.0/dist/jquery.js")}async function i(){await l("https://unpkg.com/jqueryNON_EXISTING")}async function r(){await d("https://cdn.simplecss.org/simple.min.css")}async function c(){await d("https://cdn.simplecss.org/simpleNOTFOUND.min.css")}async function l(s){a.value=!0;try{await b(s),alert("loaded ok")}catch(t){alert(h(t))}finally{a.value=!1}}async function d(s){a.value=!0;try{await C(s),alert("loaded ok")}catch(t){alert(h(t))}finally{a.value=!1}}return(s,t)=>(u(),p("div",v,[n("button",{onClick:e},"Load good script"),n("button",{onClick:i},"Load bad script"),t[0]||(t[0]=n("br",null,null,-1)),t[1]||(t[1]=n("br",null,null,-1)),n("button",{onClick:r},"Load good CSS"),n("button",{onClick:c},"Load bad CSS"),a.value?(u(),p("p",w,"loading...")):y("",!0)]))}}),D=JSON.parse('{"title":"loadScript, loadCSS","description":"","frontmatter":{},"headers":[],"relativePath":"loadScript.md","filePath":"loadScript.md"}'),N={name:"loadScript.md"},F=Object.assign(N,{setup(o){return(a,e)=>(u(),p("div",null,[e[0]||(e[0]=f(`<h1 id="loadscript-loadcss" tabindex="-1">loadScript, loadCSS <a class="header-anchor" href="#loadscript-loadcss" aria-label="Permalink to &quot;loadScript, loadCSS&quot;">â€‹</a></h1><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://gtm.com/script.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// know that your script is loaded by now</span></span></code></pre></div><p>Works in old-school (and reliable) way by injecting a <code>&lt;script&gt;</code> tag into dom and attaching onload event that resolves the promise. <code>onerror</code> rejects the promise.</p><p>See console output, but it will also do <code>alert(_stringify(err))</code>.</p>`,4)),g(E)]))}});export{D as __pageData,F as default};
